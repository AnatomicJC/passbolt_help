<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Passbolt Help | Generate an Organization Recovery Key manually</title>
    <!--
             ____                  __          ____
            / __ \____  _____ ____/ /_  ____  / / /_
           / /_/ / __ `/ ___/ ___/ __ \/ __ \/ / __/
          / ____/ /_/ (__  |__  ) /_/ / /_/ / / /_
         /_/    \__,_/____/____/_.___/\____/_/\__/

         Open source password manager for teams
         © 2019 Passbolt SA

     -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta property="og:image" content="https://help.passbolt.com/assets/img/background/og_preview.jpg" />
    <meta property="og:title" content="Generate an Organization Recovery Key manually" />
    <meta property="og:description" content="" />
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/help.min.css">
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/highlight.css">
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/cookie-eu-banner.css">
    <link rel="stylesheet" href="https://help.passbolt.com/assets/css/custom.css">
    <link rel="canonical" href="https://help.passbolt.com/configure/generate-organization-recovery-key">
    <link rel="shortcut icon" type="image/x-icon" href="https://help.passbolt.com/assets/favicon.ico" />
    <link rel="alternate" type="application/rss+xml" title="Passbolt | Help" href="https://help.passbolt.com/feed.xml">
</head>


<body>
    <div id="container" class="help page background">
            <header>
        <div class="header first ">
            <nav class="greedy">
                <div class="top navigation primary">
                    <ul class="links clearfix">
                        <li class="home with-text"><a href="http://www.passbolt.com/"><span>home</span></a></li>
                        <li class="left"><a href="https://www.passbolt.com/services"><span>pricing</span></a></li>
                        <li class="left"><a href="https://www.passbolt.com/roadmap"><span>roadmap</span></a></li>
                        <li class="left"><a href="https://community.passbolt.com/"><span>forum</span></a></li>
                        <li class="left"><a href="https://www.passbolt.com/blog"><span>blog</span></a></li>
                        <li class="left selected"><a href="https://help.passbolt.com/"><span>help</span></a></li>
                        <li class="left"><a href="https://demo.passbolt.com" class="highlighted" target="_blank" rel="noopener"><span>try it!</span></a></li>
                    </ul>
                    <button class="hidden" count="0">more</button>
                    <ul class="hidden-links hidden"></ul>
                </div>
            </nav>
        </div>
    </header>
    <div class="header second">
        <div class="col1">
            <div class="logo no-img">
                <h1><span>Passbolt</span></h1>
            </div>
        </div>
        <div class="col2 search-wrapper">
            <h2 class="visuallyhidden">Help Search</h2>
            <div>
                <form class="search ready" action="/search.html" method="get">
                    <div class="input required">
                        <label for="search-box">Search</label>
                        <input id="search-box" name="query" maxlength="64" placeholder="Help search" class="fuzzy-search" type="search">
                    </div>
                    <button value="search">
                        <i class="fa fa-fw fa-search"></i>
                        <span class="text visuallyhidden">search</span>
                    </button>
                </form>
            </div>
        </div>
        <div class="col3">
            <div class="edit-on-github">
                <a href="https://github.com/passbolt/passbolt_help/edit/master/_posts/configure/2021-12-23-generate-organization-recovery-key.md" class="button">
                    <i class="fa fa-github-alt fa-fw"></i> Edit on github</a>
            </div>
        </div>
    </div>

        <div class="panel main" aria-label="Content">
            <div class="panel left">
                
                









<div class="navigation-help" role="navigation">
    <ul>
        <li><h2>Configure</h2></li>
        
        
        <li>
        
            <a href="https://help.passbolt.com/configure/ldap/setup">Configure LDAP</a>
        </li>
        
        
        <li>
        
            <a href="https://help.passbolt.com/configure/mfa/yubikey">Configure Yubikey</a>
        </li>
        
        
        <li>
        
            <a href="https://help.passbolt.com/configure/mfa/duo">Configure Duo</a>
        </li>
        
        
        <li>
        
            <a href="https://help.passbolt.com/configure/notification/email">Configure Email Notifications</a>
        </li>
        
        
        <li>
        
            <a href="https://help.passbolt.com/configure/ldap/ldap-with-ssl">Configure LDAP with ssl</a>
        </li>
        
        
        <li>
        
            <a href="https://help.passbolt.com/configure/ldap/ldap-common-sync-error-messages">Troubleshoot LDAP sync errors</a>
        </li>
        
        
        <li>
        
            <a href="https://help.passbolt.com/configure/environment/reference">Environment variable reference</a>
        </li>
        
        
        <li>
        
            <a href="https://help.passbolt.com/configure/email/setup">Configure Email providers</a>
        </li>
        
        
        <li>
        
            <a href="https://help.passbolt.com/configure/https">Configure HTTPS</a>
        </li>
        
        
        <li>
        
            <a href="https://help.passbolt.com/faq/hosting/why-email-not-sent">Troobleshoot Email config</a>
        </li>
        
        
        <li>
        
            <a href="https://help.passbolt.com/configure/database/credentials">Update database credentials</a>
        </li>
        
        
        <li>
        
            <a href="https://help.passbolt.com/configure/account-recovery">Configure the Account Recovery</a>
        </li>
        
        
        <li class="selected">
        
            <a href="https://help.passbolt.com/configure/generate-organization-recovery-key">Generate an account recovery key</a>
        </li>
        
    </ul>
</div>









                
            </div>
            <div class="panel middle" data-spy="scroll" data-target=".scrollspy">
                <div class="grid grid-responsive-12">
                    <article>
                        <div class="row" id="introduction">
    <div class="col12">
        <div class="breadcrumbs">
            <ul>
                <li>
                    <div class="main-cell">
                        <a href="https://www.passbolt.com"><span>home</span></a>
                    </div>
                </li>
                <li>
                    <div class="main-cell">
                        <a href="/"><span>help</span></a>
                    </div>
                </li>
                
                
                <li>
                    <div class="main-cell">
                        <a href="https://help.passbolt.com/configure"><span>configure</span></a>
                    </div>
                </li>
                
                
                
                
                <li>
                    <div class="main-cell">
                        <a href="https://help.passbolt.com/configure/generate-organization-recovery-key.html"><span>generate-organization-recovery-key</span></a>
                    </div>
                </li>
                
            </ul>
        </div>
    </div>
</div>

                        <div class="row" markdown="1">
<div class="col7" markdown="1">
<h1>Generate an Organization Recovery Key manually</h1>
</div>
</div>

                        
<div class="row">
  <div class="col7">

    <p>The Account Recovery feature needs an OpenPGP key pair in order to encrypt and decrypt user’s private key password.
As it is manipulating sensitive information, passbolt requires the ORK to follow some security requirements.
If those requirements are not met, passbolt refuses the key.</p>

    <h2 id="minimum-requirements">Minimum requirements</h2>

    <p>The minimum requirements are the following:</p>

    <ul>
      <li>The algorithm used is <strong>RSA</strong></li>
      <li>The key length is minium <strong>4096</strong> bits</li>
      <li>The private key should be protected by a strong password</li>
    </ul>

    <p>Please notice that the last requirement cannot be checked on passbolt side. The reason is because during the setup of the account recovery, only the public key is given, not the private one.</p>

    <h2 id="generate-the-openpgp-organization-recovery-key-ork">Generate the OpenPGP Organization Recovery Key (ORK)</h2>

    <p>In order to have full control on the key generation, the option <code class="language-plaintext highlighter-rouge">--full-generate-key</code> is our best friend.</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>gpg <span class="nt">--full-generate-key</span>
</code></pre></div>    </div>

    <p>This runs the key generation in a step-by-step interactive way allowing us to specify every bits we need.</p>

    <ol>
      <li>Select the right algorithm: <strong>RSA</strong></li>
      <li>Select the key size: <strong>4096</strong></li>
      <li>Select the expiration time: <strong>0</strong> (for no expiration)</li>
      <li>A user name</li>
      <li>A user email</li>
      <li>A comment (not required)</li>
      <li>Confirm the choice or User id and comment</li>
      <li>Define a password for the private key: a strong password is strongly recommanded</li>
    </ol>

    <p>A key pair is generated and the console outputs a message containing a key <strong>identifier</strong> of 16 characters. This identifier is required for the next step.</p>

    <p>Here is an example of an output from the console where we can find the identifier:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg: key 0123456789ABCDEF marked as ultimately trusted
</code></pre></div>    </div>

    <p>Regarding the expiration time, it is possible to use a key with an expiration date but, it is important to know that passbolt won’t give a notification when the key is about to expire. So it’s the responsibility of the administrator to rotate the key before the expiration occurs.</p>

    <h3 id="exporting-the-keys">Exporting the keys</h3>

    <h4 id="exporting-the-public-key">Exporting the public key</h4>

    <p>The keys are stored on the machine at this step. They need to be exported to be used.</p>

    <p>In the following command, replace <strong>$identifier</strong> with the identifier obtained in the previous step.</p>
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg <span class="nt">--armor</span> <span class="nt">--export</span> <span class="nv">$identifier</span> <span class="o">&gt;</span> public.key
</code></pre></div>    </div>

    <p>This command exports the public key of the previously generated key pair and copies it in a file named <strong>public.key</strong> (the file name is not that important, we can use whatever we prefer).
The public key is required to set up the organization account recovery policy.</p>

    <h4 id="exporting-the-private-key">Exporting the private key</h4>

    <p>The private key should be place in a secure place and to avoid problems, a backup should be configured as well.</p>

    <p>In the following command, replace <strong>$identifier</strong> with the identifier obtained in the previous step.</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg <span class="nt">--armor</span> <span class="nt">--export-secret-keys</span> <span class="nv">$identifier</span> <span class="o">&gt;</span> private.key
</code></pre></div>    </div>

    <p>This command exports the private key that was previously generated and copies it in a file named <strong>private.key</strong>. 
This key is required whenever the organization account policy is changed to ensure that only a person having access to the key is doing the operation.
Also, it is required when the ORK is being changed as it is used to sign the new ORK in that case.</p>

    <div class="last-updated">
      <h3>Last updated</h3>
      <p>This article was last updated on 
December
23rd,
2021.</p>
    </div>

  </div>
  <div class="col4 last push1">

    <div class="message tldr notice">
    <p>Are you experiencing issues when installing passbolt?</p>
    
    <a href="https://community.passbolt.com/c/installation-issues" class="button primary">Ask the community!</a>
    
</div>

  </div>
</div>

                    </article>
                </div>
            </div>
        </div>
            <footer>
        <div class="footer">
            <ul class="footer-links">
                <li><a href="https://www.passbolt.com/licence">Terms</a></li>
                <li><a href="https://www.passbolt.com/privacy">Privacy</a></li>
                <li><a href="https://www.passbolt.com/credits">Credits</a></li>
                <li><a href="https://careers.passbolt.com">Careers</a></li>
            </ul>
        </div>
    </footer>
    <div id="cookies-eu-banner" class="visually-hidden">
        🍪 &nbsp; Do you accept cookies for statistical purposes?
        <a href="https://www.passbolt.com/privacy" id="cookies-eu-more">(Read more)</a>
        <a class="button primary" id="cookies-eu-accept">Accept</a>
        <a id="cookies-eu-reject">No thanks!</a>
    </div>


    </div>
    <script src="https://consent.cookiebot.com/uc.js" data-cbid="900808a8-f178-4994-b2ad-66bf3ccca5f7" data-blockingmode="auto" strategy="beforeInteractive"></script>
<script src="https://help.passbolt.com/assets/js/matomo-tag-manager.js"></script>
<script src="https://help.passbolt.com/assets/js/matomo-analytics.js"></script>
<script src="https://code.jquery.com/jquery-3.5.0.slim.min.js" integrity="sha384-/IFzzQmt1S744I+IQO4Mc1uphkxbXt1tEwjQ/qSw2p8pXWck09sLvqHmKDYYwReJ" crossorigin="anonymous"></script>
<script src="https://help.passbolt.com/assets/js/analytics.js"></script>
<script src="https://help.passbolt.com/assets/js/greedynav.js"></script>
</body>

</html>